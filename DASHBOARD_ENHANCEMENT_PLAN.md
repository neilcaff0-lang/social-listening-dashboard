# Dashboard 增强计划

## 项目目标
扩展 SNS Analytics Dashboard，添加多维度数据分析和洞察模块，提升数据可视化质量和可读性。

## 现状分析

### 现有数据维度
- 关键词、品类、声量、搜索量
- YOY（同比增速）、MOM（环比增速）
- 四象限分类（热度-增长）
- 时间序列（月维度）

### 现有图表
- 关键词气泡图（声量 vs YOY）
- 趋势折线图
- Top 关键词排行
- 数据明细表格

## Phase 1: 研究与设计（当前）

### 任务
1. 研究 SNS 数据分析的最佳实践
2. 确定可新增的分析维度
3. 设计可视化方案（解决量级差异问题）

### 预期新增维度
| 维度 | 说明 | 可视化方案 |
|------|------|-----------|
| 品类对比分析 | 不同品类的声量/增长对比 | 分组柱状图、雷达图 |
| 时间趋势深度 | 季节性、周期性分析 | 多系列折线图、热力图 |
| 关键词关系 | 关键词之间的相关性 | 相关矩阵、网络图 |
| 增长质量 | 高增长的可持续性分析 | 散点图+趋势线 |
| 竞争格局 | 关键词市场份额 | 饼图/环形图、树图 |
| 异常检测 | 识别异常波动 | 箱线图、异常标记 |

### 技术改进
- 对数坐标支持（处理量级差异）
- 数据归一化
- 交互式筛选联动
- 响应式布局优化

## Phase 2: 核心工具实现

### 2.1 数据转换工具
- [ ] 对数坐标转换器
- [ ] 数据归一化（Min-Max, Z-score）
- [ ] 移动平均计算
- [ ] 同比/环比自动计算

### 2.2 洞察算法
- [ ] 趋势检测（上升/下降/平稳）
- [ ] 异常值检测（IQR方法）
- [ ] 相关性计算
- [ ] 聚类分析（简易K-means）

## Phase 3: 图表组件开发

### 3.1 新增图表类型
- [ ] LogScaleBubbleChart - 对数坐标气泡图
- [ ] CategoryComparisonChart - 品类对比图
- [ ] CorrelationMatrix - 相关性矩阵
- [ ] SeasonalityChart - 季节性分析图
- [ ] MarketShareChart - 市场份额图
- [ ] AnomalyDetectionChart - 异常检测图

### 3.2 现有图表优化
- [ ] 气泡图添加对数坐标选项
- [ ] 趋势图添加多系列对比
- [ ] 所有图表添加数据缩放

## Phase 4: 洞察面板

### 4.1 自动洞察
- [ ] 关键发现摘要（自动生成的文字洞察）
- [ ] 异常提醒
- [ ] 趋势预测（简单线性回归）

### 4.2 对比分析
- [ ] 时间段对比
- [ ] 品类对比
- [ ] 关键词对比

## Phase 5: 集成与测试

### 5.1 布局优化
- [ ] 仪表板网格布局
- [ ] 卡片可拖拽排序
- [ ] 响应式适配

### 5.2 性能优化
- [ ] 大数据量渲染优化
- [ ] 图表懒加载

### 5.3 测试验证
- [ ] 各图表功能测试
- [ ] 数据准确性验证
- [ ] 可视化效果截图对比

---

## 当前进度

| Phase | 状态 | 备注 |
|-------|------|------|
| Phase 1 | completed | SNS分析最佳实践研究完成 |
| Phase 2 | completed | 架构设计完成 |
| Phase 3 | completed | 核心工具库实现完成 |
| Phase 4 | completed | 5个新图表组件实现完成 |
| Phase 5 | completed | 集成到Dashboard完成 |
| Phase 6 | completed | 构建测试通过 |

## 已实现功能

### 1. 核心分析工具 (`src/lib/advanced-analytics.ts`)
- ✅ 对数坐标转换 (toLogScale, fromLogScale, shouldUseLogScale)
- ✅ 数据归一化 (Min-Max, Z-Score)
- ✅ 皮尔逊相关系数计算
- ✅ 相关性矩阵生成
- ✅ IQR异常检测算法
- ✅ 品类分析 (声量份额、增长势头)
- ✅ 简单线性回归预测
- ✅ 季节性分析

### 2. 新增图表组件
- ✅ **LogBubbleChart** - 对数坐标气泡图，解决量级差异问题，支持X/Y轴对数切换
- ✅ **CategoryComparisonChart** - 品类对比分析，支持柱状图/雷达图/份额图三种视图
- ✅ **CorrelationMatrix** - 相关性热力图矩阵，自动识别强相关关系
- ✅ **AnomalyDetection** - 异常检测面板，展示高风险/中风险异常
- ✅ **InsightsPanel** - 智能洞察面板，自动生成6类数据洞察

### 3. 集成与优化
- ✅ 集成到 MainContent 布局
- ✅ 修复 TypeScript 类型问题
- ✅ 修复 ECharts 渐变 SSR 问题
- ✅ 构建测试通过

## 研究发现记录

### 发现 1: 对数坐标的适用场景
- 当数据跨度超过 10 倍时，对数坐标能更好展示相对变化
- 适合展示增长率、声量等跨度大的指标
- 需要注意：0值和负数需要特殊处理

### 发现 2: SNS 分析维度

基于研究，确定以下核心分析维度：

**A. 声量分析维度**
- 声量份额 (SOV) = 品牌声量 / 行业总声量
- 声量阵地分布（平台占比）
- 声量类型（UGC/PGC/BGC）
- 传播半衰期

**B. 互动质量维度**
- 有效互动率（剔除水军）
- 深度互动率（基于评论质量）
- 互动量份额 (SOE)
- 传播价值系数 (CVC)

**C. 趋势分析维度**
- 时间序列趋势（声量/互动）
- 季节性分析
- 高频关联词演变
- 同比/环比分析

**D. 竞争分析维度**
- 竞品声量对比
- 情感对比（NSR净情感度）
- 互动效率对比
- 心智占位分析

**E. 内容分析维度**
- 内容类型效果对比
- 关键词关联分析
- 情感三分类（正/中/负）
- 负面内容监测

### 发现 3: 可视化最佳实践

**对数坐标适用场景：**
- 数据跨度超过10倍时优先使用
- 适合展示相对变化率
- 处理0值和负数需要偏移转换

**图表选择原则：**
- 对比关系 → 柱状图/条形图
- 趋势关系 → 折线图/面积图
- 分布关系 → 散点图/气泡图/箱线图
- 构成关系 → 饼图/树图/堆叠图
- 关联关系 → 热力图/网络图

**颜色使用规范：**
- 同系列使用同一色相
- 对比色用于突出差异
- 避免超过7种颜色
- 考虑色盲友好性

## 错误记录

| 错误 | 发生时间 | 解决方案 |
|------|---------|---------|
| 无 | - | - |
